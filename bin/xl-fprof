#!/usr/bin/env bash

. "$HOME/.local/lib/xlotus/xlfns"

HELP="$XLOTUS_HELP"

printHelp () {
    cat "$HELP/xl-fprof"
    cat "$HELP/footer"
}

case $1 in
    -h|--help) printHelp ;;
    *)
        ffprofile=$(ls "$HOME/.mozilla/firefox/" |\
                sed '/Pending Pings/d; /profiles.ini/d; /installs.ini/d; /Crash Reports/d' |\
                awk -F '.' '{printf "%2s %s\n", "", $2}' |\
                fzfcmd "Firefox" |\
                sed 's/[[:space:]]//g;')

        if [ -n "$ffprofile" ]; then
            nohup bash -c "firefox-developer-edition --name \"firefox-$ffprofile\" -P $ffprofile &" 2&>/dev/null
        fi
        ;;
esac
